<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="engine.css">
	</head>
	<body>
	<canvas id="gameScreen" class="gameScreen"></canvas>
	<script type="text/javascript" src="controls.js"></script>
	<script type="text/javascript" src="player.js"></script>
	<script type="text/javascript" src="util.js"></script>
	<script type="text/javascript" src="physics.js"></script>
	<script>
		//setup game
		var w = window.innerWidth - 20;
		var h = window.innerHeight - 20;
		var player = Player();
        var entity = Entity(100,100);
		var context = document.getElementById('gameScreen').getContext("2d");
		var canvas = document.getElementById('gameScreen');
        var options = SpriteOptions('images/sprite.png', 1000, 100, 10, context);
        var sprite = Sprite('images/sprite.png', 1000, 100, context, options);
		function animate() {
			context.canvas.width = w;
			context.canvas.height = h;
			handleInputs();
			//clear previous frame. Maybe do more efficently, idk. Should probably be handled by world/screen module
			context.clearRect(0, 0, w,h);
			context.fillStyle = 'blue';
			context.rect(0,0,w,h);
    		context.fill();
    		//make a seperate drawing module maybe
    		player.draw(context);
            entity.draw(context);
            entity.collide(player);
            sprite.render();
            window.requestAnimationFrame(animate);
			return;
		}
        window.requestAnimationFrame(animate);


        window.onresize = function(event) {
            console.log("rawr");
            document.getElementById('gameScreen').style.width = String(w);
            document.getElementById('gameScreen').style.height = String(h);
            sprite.reload();
        }
		</script>
	</body>
</html> 
